import { Meta, Canvas } from "@storybook/blocks";

import * as Stories from "./Input.stories";
import { ClassesTable } from "../../../components/ClassesTable";
import {
  FORM_FIELD_CLASS_VARIANTS,
  HELPER_CLASS_VARIANTS,
  LABEL_CLASS_VARIANTS,
  VALIDATION_CLASS_VARIANTS,
} from "../../constants";

<Meta of={Stories} />

# Input

## Base

This is the most basic version of the component and its default appearance.

<Canvas of={Stories.Basic} />

## Hidden label

We can get an Input field with the label hidden, but still accessible, adding the modifier `--hide` to the label.
We use 'screen-readers only' styles to hide the label, so it's still accessible to the assistive technologies.

<Canvas of={Stories.HiddenLabel} />

## With Helper

We can add a helper message below the input control with extra info about how to fill the field.

In small contexts: toolbar, filters... etc. or because of design needs, the helper
has to be rendered as an InlineMessage component: the helper button next to the label,
triggering a contextual floating message. In this case, we need to wrap the button
inside the label block and add to this last the modifier `--wrapper`.

If the helper message is very long or there is relative information to the field,
then we can use a 'read more' link at the end of the helper. This link can trigger
a floating contextual message (as InlineMessage) or link to another page with the info.
For the floating way you have to use a status and two sizes smaller icon button than
the Input size (E.g. If the Input is 'md' size, then the icon-button has to be 'xs' size).

<Canvas of={Stories.WithHelper} />

## With Validation

The modifier classes for different statuses are `--error`, `--success` and `--warning`. You have to apply the modifiers
to each child: `input--error`, `validation--error`... etc.

### Docked Validation

We can add a validation message below the input control with the info about the validation state.
The validation message must always replace the helper message in case there was one.

If the validation message is very long or there is relative extra information
to fill the field correctly, then we can use a 'read more' link at the end of the validation.
This link can trigger a floating contextual message (as InlineMessage) or link to another page with the info.

<Canvas of={Stories.DockedValidation} />

### Floating Validation

In small contexts: toolbar, filters... etc. or because of design needs, the validation
has to be rendered as InlineMessage components: the button next to the input control
and triggering a contextual floating message. We need to wrap the input control and the
trigger button with an element with the class `input-wrapper`.

<Canvas of={Stories.FloatingValidation} />

## Modifiers

### Size

Three sizes available: `--sm`, `--md` and `--lg`. You have to apply the modifiers to each
child: `label--sm`, `input--sm`, `helper--sm`... etc.

<Canvas of={Stories.Sizes} />

### Input control width

It's possible to assign a pre-defined input control width to adapt the field to the expected filled data.
If your input expects to be filled with a two digits number at most, then its width must be smaller than
another one which expects the subject of an email message.

There are several pre-defined widths available: `--xxs-width`, `--xs-width`... `--xl-width` and the class
attribute value must be added to the input control, not to the field wrapper.

The width only affects to the input control, not to the label, helper... or any element else.
If you need a specific width for the whole field, then you have to wrap it with a layout component.

By default, the input field fits the full width of its parent.

<Canvas of={Stories.Width} />

### Status

Three statuses available: `--error`, `--success` and `--warning`. You have to apply the modifiers to each
child: `input--error`, `validation--error`... etc.

<Canvas of={Stories.Status} />

### Label to left

We can get the label to the left of the input with the `--hor` modifier.
We only should use this way when the input is rendered in a small contexts
as a toolbar or filter block.

The helper and the validation have to be rendered
as InlineMessage components: the helper button next to the label and the
validation one next to the input control and triggering a contextual floating message.

In the helper case, we need to wrap the button inside the label block and add to this last
the modifier `--wrapper`.

<Canvas of={Stories.LabelToLeft} />

### Required

If you want to inform that the input is a required field you have to add the modifier `--required`.
For accessibility reasons you should add the attribute `required` to the input control.

<Canvas of={Stories.Required} />

### Disabled

If you want to make the field disabled you have to add the attribute `disabled` to the input control:

<Canvas of={Stories.Disabled} />

### Readonly

If you want to make the field readonly you have to add the attribute `readonly` to the input control.
You can add only `readonly` or `readonly="true"`.

<Canvas of={Stories.Readonly} />

## Cases

The structure and classes are common for type `text`, `number`, `month`, `password`, `text`, `date`,
`datetime`, `datetime-local`, `tel`, `time`, `url` and `week`. There are son types which have
specific structure or styles as `search` or `color`.

### Color

The input type `color` has special styles: not wide width, some padding variations... etc.
If you need a full-width input you can still use the modifier `input--wide-width` in the
input control.

<Canvas of={Stories.CaseColor} />

### Password with button

There is a case for the input type `password` with an icon button to show/hide the value
of the input. You have to use a circular and two sizes smaller button than the Input size
(E.g. If the Input is 'sm' size, then the icon-button has to be 'xxs' size).

<Canvas of={Stories.CasePassword} />

## Overview of CSS classes

<ClassesTable
  classVariants={[
    {
      selector: ".input",
      description: "Assign the basic styles to the input control",
      type: "block",
      restrictions: "input",
    },
    {
      selector: ".input--sm, .input--md, .input--lg",
      description:
        "Assign the size styles: height, padding, font-size, etc. to the form control",
      type: "modifier",
      restrictions: "input",
    },
    {
      selector: ".input--error, .input--success, .input--warning",
      description: "Assign status styles.",
      type: "modifier",
      restrictions: "input",
    },
    {
      selector: ".input-wrapper",
      description:
        "Assign the distribution styles to the wrapper of input and validation button",
      type: "block",
      restrictions: "div, span",
    },
    {
      selector: ".input-wrapper--password",
      description:
        "Assign the distribution styles to the wrapper of input and show/hide password button",
      type: "modifier",
      restrictions: "div, span",
    },
    {
      selector:
        ".input--xxs-width, .input--xs-width, .input--sm-width, .input--md-width, .input--lg-width, .input--xl-width",
      description: "Assign a pre-defined width to the input control.",
      type: "modifier",
      restrictions: "input",
    },
    ...FORM_FIELD_CLASS_VARIANTS,
    ...LABEL_CLASS_VARIANTS,
    ...VALIDATION_CLASS_VARIANTS,
    ...HELPER_CLASS_VARIANTS,
  ]}
/>
